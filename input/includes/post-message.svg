<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1186" height="958"><desc>entryspacing%200.5%0Aparticipantgroup%20%23lightblue%20%2B%2B**EHR%20Browser%20Interface**%5Cnhttps%3A%2F%2Fehr.example.org%2B%2B%0A%0Aparticipantspacing%205%0Aparticipant%20%22%2B%2Behr.window%2B%2B%22%20as%20ehr.window%0Alifelinestyle%20ehr.window%20%3A%3Asolid%0A%0Aparticipantgroup%20%23lightgreen%20%2B%2B**embedded%20iframe**%2B%2B%0A%20participant%20%22%2B%2Bapp.window%2B%2B%22%20as%20app.window%0A%20end%0A%20lifelinestyle%20app.window%20%3A%3Asolid%0Aend%0A%0Aparticipantgroup%20%23pink%20%2B%2B**EHR%20Auth%20Server**%2B%2B%0Aparticipant%20%22%2B%2Bauthorize.html%2B%2B%22%20as%20authorize.html%0Alifelinestyle%20%3A%3Asolid%0Aend%0A%0A%0Aparallel%0Agroup%20%23orange%20SMART%20Launch%0Aauthorize.html%3C-%3Eapp.window%3A%20%0Aparallel%20off%0A%0A%0Afontfamily%20monospace%0Abox%20over%20app.window%20%23lightyellow%3A%20%2B%2BlaunchClientData%20%3D%20%7B%5Cn%20%20%22smart_web_messaging_handle%22%3A%20**%22RXhhbXBsZSBoYW5kbGUK%22**%2C%5Cn%20%20%22smart_web_messaging_origin%22%3A%20**%22https%3A%2F%2Fehr.example.org%22**%2C%5Cn...%5Cn%7D%2B%2B%0Aend%0A%0Aspace%201%0Aehr.window%3C-app.window%3A%20%2B%2BpostMessage(message%2C%20**%22https%3A%2F%2Fehr.example.org%22**)%2B%2B%20%20%20%20%0Abox%20over%20app.window%20%23lightyellow%3A%20%2B%2Bmessage%20%3D%20%7B%5Cn%20%20%22messageId%22%3A%20**%22248cd0b0-5167-4824-babc-f250e5296527%22**%2C%5Cn%20%20%22messagingHandle%22%3A%20**%22RXhhbXBsZSBoYW5kbGUK%22**%2C%5Cn%20%20%22messageType%22%3A%20%22ui.launchActivity%22%2C%5Cn%20%20%22payload%22%3A%20%7B...%7D%5Cn%7D%2B%2B%0A%0Aspace%201%0Aapp.window%3C-ehr.window%3A%20%2B%2BpostMessage(response%2C%20%22https%3A%2F%2Fapp%2Fafter-auth%22)%2B%2B%0Afontfamily%20monospace%0Abox%20over%20ehr.window%20%23lightyellow%3A%20%2B%2Bresponse%20%3D%20%7B%5Cn%20%20%22messageID%22%3A%20%229befe172-f5b2-408b-a993-939690f5388b%22%2C%5Cn%20%20%22responseToMessageId%22%3A%20**%22248cd0b0-5167-4824-babc-f250e5296527%22**%2C%5Cn%20%20%22payload%22%3A%20%7B...%7D%5Cn%7D%2B%2B%0Afontfamily%20arial</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1186" height="958"/></g><g><g><path fill="lightblue" stroke="black" paint-order="fill stroke markers" d=" M 219.31936531195706 10.291178079000005 L 844.9037894409167 10.291178079000005 L 844.9037894409167 950.1559482560001 L 219.31936531195706 950.1559482560001 L 219.31936531195706 10.291178079000005" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="462.755391463351" y="38.086154771000004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">EHR Browser Interface</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="462.755391463351" y="59.196263651" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">https:</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="494.0616048422572" y="59.196263651" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">//</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="501.174092635226" y="59.196263651" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ehr.example.org</text></g><g><path fill="lightgreen" stroke="black" paint-order="fill stroke markers" d=" M 712.7420947145573 76.43618590300001 L 836.1079107409167 76.43618590300001 L 836.1079107409167 950.1559482560001 L 712.7420947145573 950.1559482560001 L 712.7420947145573 76.43618590300001" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="721.4313046076198" y="104.23116259500001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">embedded iframe</text></g><g><path fill="pink" stroke="black" paint-order="fill stroke markers" d=" M 1030.605414785784 76.43618590300001 L 1166.7649625015965 76.43618590300001 L 1166.7649625015965 950.1559482560001 L 1030.605414785784 950.1559482560001 L 1030.605414785784 76.43618590300001" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="1047.1164859459363" y="104.23116259500001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">EHR Auth Server</text></g><rect fill="rgb(255,237,204)" stroke="none" x="518.2445906696902" y="196.851765306" width="642.0117488740001" height="221.02786619"/></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 279.2241437475 174.862068556 L 279.2241437475 950.1559482560001" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 774.425002727737 174.862068556 L 774.425002727737 950.1559482560001" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1098.6851886436903 174.862068556 L 1098.6851886436903 950.1559482560001" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 228.11524401195706 122.966384226 L 330.333043483043 122.966384226 L 330.333043483043 174.862068556 L 228.11524401195706 174.862068556 L 228.11524401195706 122.966384226 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="247.20230079095705" y="156.214805712" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ehr.window</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 721.5379734145573 122.966384226 L 827.3120320409167 122.966384226 L 827.3120320409167 174.862068556 L 721.5379734145573 174.862068556 L 721.5379734145573 122.966384226 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="740.6250301935573" y="156.214805712" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">app.window</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1039.401293485784 122.966384226 L 1157.9690838015965 122.966384226 L 1157.9690838015965 174.862068556 L 1039.401293485784 174.862068556 L 1039.401293485784 122.966384226 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1058.488350264784" y="156.214805712" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">authorize.html</text></g></g><g><g><g><rect fill="rgb(255,237,204)" stroke="none" x="933.7278489607137" y="231.155692236" width="5.65449345" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="936.5550956857137" y="246.988273896" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1084.201308384357 254.024976856 L 788.9088829870703 254.024976856" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(774.425002727737,254.024976856) translate(-774.425002727737,-254.024976856)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 789.0848005610703 246.69507793933332 L 774.425002727737 254.024976856 L 789.0848005610703 261.3548757726667 Z"/><g transform="translate(1098.6851886436903,254.024976856) translate(-1098.6851886436903,-254.024976856)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1084.0253908103568 246.69507793933332 L 1098.6851886436903 254.024976856 L 1084.0253908103568 261.3548757726667 Z"/></g></g></g><path fill="lightyellow" stroke="black" paint-order="fill stroke markers" d=" M 527.0404693696902 267.21879490599997 L 1021.8095360857839 267.21879490599997 L 1021.8095360857839 404.685813446 L 527.0404693696902 404.685813446 L 527.0404693696902 267.21879490599997" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="551.6689297296901" y="296.37085002599997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">launchClientData = {</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="551.6689297296901" y="318.988823826" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  "smart_web_messaging_handle": </text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="797.4687344171901" y="318.988823826" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">"RXhhbXBsZSBoYW5kbGUK"</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="966.4561001398464" y="318.988823826" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">,</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="551.6689297296901" y="341.606797626" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  "smart_web_messaging_origin": </text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="797.4687344171901" y="341.606797626" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">"https:</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="851.2374416925808" y="341.606797626" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">//</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="866.5999294855495" y="341.606797626" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ehr.example.org"</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="989.4998318292995" y="341.606797626" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">,</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="551.6689297296901" y="364.224771426" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">...</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="551.6689297296901" y="386.84274522600003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">}</text></g><g><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="333.52127428742324" y="482.215201416" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">postMessage(message, </text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="494.8273961135951" y="482.215201416" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">"https:</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="548.5961033889857" y="482.215201416" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">//</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="563.9585911819545" y="482.215201416" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ehr.example.org"</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="686.8584935257045" y="482.215201416" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text><text fill="black" stroke="none" font-family="monospace" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="694.5397374221889" y="482.215201416" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    </text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 774.425002727737 491.26239093600003 L 293.70802400683334 491.26239093600003" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(279.2241437475,491.26239093600003) translate(-279.2241437475,-491.26239093600003)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 293.8839415808334 483.9324920193334 L 279.2241437475 491.26239093600003 L 293.8839415808334 498.5922898526667 Z"/></g></g><path fill="lightyellow" stroke="black" paint-order="fill stroke markers" d=" M 542.4029571626589 504.4562089860001 L 1006.4470482928152 504.4562089860001 L 1006.4470482928152 664.5412013260001 L 542.4029571626589 664.5412013260001 L 542.4029571626589 504.4562089860001" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="567.0314175226589" y="533.608264106" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">message = {</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="567.0314175226589" y="556.2262379059999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  "messageId": </text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="682.2500759699245" y="556.2262379059999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">"248cd0b0-5167-4824-babc-f250e5296527"</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="974.1373440363308" y="556.2262379059999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">,</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="567.0314175226589" y="578.8442117059999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  "messagingHandle": </text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="728.3375393488308" y="578.8442117059999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">"RXhhbXBsZSBoYW5kbGUK"</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="897.324905071487" y="578.8442117059999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">,</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="567.0314175226589" y="601.4621855059999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  "messageType": "ui.launchActivity",</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="567.0314175226589" y="624.0801593059998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  "payload": {...}</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="567.0314175226589" y="646.6981331059998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">}</text></g><g><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="346.31534167023574" y="728.8767712460001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">postMessage(response, "https:</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="569.0714146682826" y="728.8767712460001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">//</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="584.4339024612514" y="728.8767712460001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">app/after-auth")</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 279.2241437475 737.923960766 L 759.9411224684037 737.923960766" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(774.425002727737,737.923960766) translate(-774.425002727737,-737.923960766)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 759.7652048944037 730.5940618493333 L 774.425002727737 737.923960766 L 759.7652048944037 745.2538596826668 Z"/></g></g><path fill="lightyellow" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 751.117778816 L 549.652408795 751.117778816 L 549.652408795 888.5847973560001 L 8.7958787 888.5847973560001 L 8.7958787 751.117778816" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="33.42433906000002" y="780.269833936" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">response = {</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="33.42433906000002" y="802.887807736" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  "messageID": "9befe172-f5b2-408b-a993-939690f5388b",</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="33.42433906000002" y="825.505781536" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  "responseToMessageId": </text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="bold" text-decoration="normal" x="225.4554364721094" y="825.505781536" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">"248cd0b0-5167-4824-babc-f250e5296527"</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="517.3427045385156" y="825.505781536" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">,</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="33.42433906000002" y="848.1237553359999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  "payload": {...}</text><text fill="black" stroke="none" font-family="monospace" font-size="9.6pt" font-style="normal" font-weight="normal" text-decoration="normal" x="33.42433906000002" y="870.7417291359999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">}</text></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 518.2445906696902 196.851765306 L 1160.2563395436903 196.851765306 L 1160.2563395436903 417.879631496 L 518.2445906696902 417.879631496 L 518.2445906696902 196.851765306 Z" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><path fill="orange" stroke="black" paint-order="fill stroke markers" d=" M 518.2445906696902 196.851765306 L 518.2445906696902 217.961874186 L 616.4533435067996 217.961874186 L 627.0083979467996 207.406819746 L 627.0083979467996 196.851765306 L 518.2445906696902 196.851765306" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="6.4pt" font-style="normal" font-weight="bold" text-decoration="normal" x="535.8363480696902" y="210.92517122599997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">SMART Launch</text></g></g></g></svg>
<!--

SVG Source: https://sequencediagram.org/
========================================

entryspacing 0.5
participantgroup #lightblue ++**EHR Browser Interface**\nhttps://ehr.example.org++

participantspacing 5
participant "++ehr.window++" as ehr.window
lifelinestyle ehr.window ::solid

participantgroup #lightgreen ++**embedded iframe**++
 participant "++app.window++" as app.window
 end
 lifelinestyle app.window ::solid
end

participantgroup #pink ++**EHR Auth Server**++
participant "++authorize.html++" as authorize.html
lifelinestyle ::solid
end


parallel
group #orange SMART Launch
authorize.html<->app.window: 
parallel off


fontfamily monospace
box over app.window #lightyellow: ++launchClientData = {\n  "smart_web_messaging_handle": **"RXhhbXBsZSBoYW5kbGUK"**,\n  "smart_web_messaging_origin": **"https://ehr.example.org"**,\n...\n}++
end

space 1
ehr.window<-app.window: ++postMessage(message, **"https://ehr.example.org"**)++    
box over app.window #lightyellow: ++message = {\n  "messageId": **"248cd0b0-5167-4824-babc-f250e5296527"**,\n  "messagingHandle": **"RXhhbXBsZSBoYW5kbGUK"**,\n  "messageType": "ui.launchActivity",\n  "payload": {...}\n}++

space 1
app.window<-ehr.window: ++postMessage(response, "https://app/after-auth")++
fontfamily monospace
box over ehr.window #lightyellow: ++response = {\n  "messageID": "9befe172-f5b2-408b-a993-939690f5388b",\n  "responseToMessageId": **"248cd0b0-5167-4824-babc-f250e5296527"**,\n  "payload": {...}\n}++
fontfamily arial
-->
